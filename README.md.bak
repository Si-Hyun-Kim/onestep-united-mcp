# ğŸ›¡ï¸ AI ê¸°ë°˜ ìë™ ë³´ì•ˆ ì‹œìŠ¤í…œ - ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
security-automation/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ setup.sh
â”œâ”€â”€ start_all.sh
â”œâ”€â”€ stop_all.sh
â”œâ”€â”€ restart.sh
â”œâ”€â”€ status.sh
â”‚
â”œâ”€â”€ mcp_server/                    # FastMCP ì„œë²„
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ mcp_server.py              # ë©”ì¸ MCP ì„œë²„
â”‚   â”œâ”€â”€ log_collectors.py          # ë¡œê·¸ ìˆ˜ì§‘ê¸°
â”‚   â””â”€â”€ rule_manager.py            # Suricata ë£° ê´€ë¦¬
â”‚
â”œâ”€â”€ agent/                         # FastAgent + Ollama
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ security_agent.py          # ë©”ì¸ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ ollama_analyzer.py         # Ollama AI ë¶„ì„ê¸°
â”‚   â”œâ”€â”€ rule_generator.py          # ë£° ìƒì„±ê¸°
â”‚   â””â”€â”€ config.yaml                # ì—ì´ì „íŠ¸ ì„¤ì •
â”‚
â”œâ”€â”€ api/                           # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                    # FastAPI ì•±
â”‚   â”œâ”€â”€ models.py                  # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ logs.py                # ë¡œê·¸ API
â”‚   â”‚   â”œâ”€â”€ rules.py               # ë£° API
â”‚   â”‚   â”œâ”€â”€ reports.py             # ë³´ê³ ì„œ API
â”‚   â”‚   â””â”€â”€ analysis.py            # ë¶„ì„ API
â”‚   â””â”€â”€ websocket.py               # ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°
â”‚
â”œâ”€â”€ dashboard/                     # Flask ì›¹ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py                     # Flask ì•±
â”‚   â”œâ”€â”€ auth.py                    # MFA ì¸ì¦
â”‚   â”œâ”€â”€ util.py
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â”œâ”€â”€ dashboard.js
â”‚   â”‚       â”œâ”€â”€ charts.js
â”‚   â”‚       â””â”€â”€ realtime.js
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”‚   â”œâ”€â”€ logs.html
â”‚   â”‚   â”œâ”€â”€ rules.html
â”‚   â”‚   â”œâ”€â”€ analysis.html
â”‚   â”‚   â”œâ”€â”€ comparison.html
â”‚   â”‚   â””â”€â”€ reports.html
â”‚   â””â”€â”€ config.py
â”‚
â”œâ”€â”€ vulnerable_app/                # ì·¨ì•½í•œ ì›¹ ì„œë²„ (í…ŒìŠ¤íŠ¸ìš©)
â”‚   â”œâ”€â”€ frontend/                  # 3000ë²ˆ í¬íŠ¸
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â””â”€â”€ app.js
â”‚   â””â”€â”€ backend/                   # 5000ë²ˆ í¬íŠ¸
â”‚       â””â”€â”€ server.py
â”‚
â”œâ”€â”€ logs/                          # ë¡œê·¸ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ suricata/                  # Suricata ë¡œê·¸
â”‚   â”œâ”€â”€ hexstrike/                 # HexStrike ë¡œê·¸
â”‚   â”œâ”€â”€ agent/                     # ì—ì´ì „íŠ¸ ë¡œê·¸
â”‚   â””â”€â”€ actions/                   # ìë™ ì°¨ë‹¨ ê¸°ë¡
â”‚
â”œâ”€â”€ rules/                         # Suricata ë£°
â”‚   â”œâ”€â”€ custom/                    # ìë™ ìƒì„± ë£°
â”‚   â””â”€â”€ backup/                    # ë£° ë°±ì—…
â”‚
â”œâ”€â”€ reports/                       # ìƒì„±ëœ ë³´ê³ ì„œ
â”‚   â””â”€â”€ .gitkeep
â”‚
â””â”€â”€ tests/                         # í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ test_mcp.py
    â”œâ”€â”€ test_agent.py
    â””â”€â”€ test_api.py
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

```bash
# Ubuntu/Debian
- Python 3.10+
- Node.js 18+
- Suricata IPS
- Ollama
- ìµœì†Œ 4GB RAM
- 10GB ë””ìŠ¤í¬ ê³µê°„
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# 1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone <your-repo>
cd security-automation

# 2. ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
chmod +x setup.sh
./setup.sh
```

### 3. Ollama ì„¤ì¹˜ ë° ëª¨ë¸ ë‹¤ìš´ë¡œë“œ

```bash
# Ollama ì„¤ì¹˜
curl -fsSL https://ollama.com/install.sh | sh

# Qwen3 ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
ollama pull qwen2.5:7b

# ëª¨ë¸ í™•ì¸
ollama list
```

### 4. HexStrike AI ë¡œê·¸ ì—°ë™ ì„¤ì •

Red Team ì„œë²„ì—ì„œ HexStrike AI ë¡œê·¸ë¥¼ Blue Team ì„œë²„ë¡œ ì „ì†¡:

```bash
# Red Team ì„œë²„ (HexStrike AI)
# ë¡œê·¸ë¥¼ rsyncë¡œ ì‹¤ì‹œê°„ ì „ì†¡
rsync -avz --progress \
  /var/log/hexstrike/ \
  user@blue-team-server:/path/to/security-automation/logs/hexstrike/

# ë˜ëŠ” SSH í„°ë„ë§
ssh -L 9000:localhost:9000 user@blue-team-server
```

### 5. ì‹œìŠ¤í…œ ì‹œì‘

```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹œì‘
./start_all.sh

# ê°œë³„ ì‹¤í–‰
python3 mcp_server/mcp_server.py        # MCP ì„œë²„
python3 agent/security_agent.py         # AI ì—ì´ì „íŠ¸
python3 api/main.py                     # FastAPI
python3 dashboard/app.py                # Flask ëŒ€ì‹œë³´ë“œ
```

### 6. ì›¹ ëŒ€ì‹œë³´ë“œ ì ‘ì†

```
http://localhost:8080
```

ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •:
- ID: admin
- Password: (ì´ˆê¸° ì„¤ì • ì‹œ ìƒì„±)

## ğŸ“‹ requirements.txt

```txt
# FastMCP & MCP ê´€ë ¨
mcp==1.0.0
fastmcp==0.2.0

# FastAPI & ì›¹
fastapi==0.109.0
uvicorn==0.27.0
websockets==12.0
python-multipart==0.0.6

# Flask ëŒ€ì‹œë³´ë“œ
Flask==3.0.0
Flask-Login==0.6.3
Flask-WTF==1.2.1
pyotp==2.9.0
qrcode==7.4.2

# ë°ì´í„° ì²˜ë¦¬
pandas==2.1.4
numpy==1.26.3

# Ollama
ollama==0.1.6

# ìœ í‹¸ë¦¬í‹°
python-dotenv==1.0.0
pyyaml==6.0.1
requests==2.31.0
aiofiles==23.2.1

# ì°¨íŠ¸/ê·¸ë˜í”„
plotly==5.18.0
matplotlib==3.8.2

# ë³´ê³ ì„œ ìƒì„±
reportlab==4.0.9
jinja2==3.1.3

# ë¡œê¹…
loguru==0.7.2

# ì‹œìŠ¤í…œ
psutil==5.9.8
```

## ğŸ”§ ì„¤ì • íŒŒì¼

### agent/config.yaml

```yaml
agent:
  name: "SecurityAgent"
  check_interval: 30  # 30ì´ˆë§ˆë‹¤ ë¶„ì„
  
ollama:
  host: "http://localhost:11434"
  model: "qwen2.5:7b"
  temperature: 0.3
  max_tokens: 2000

suricata:
  log_path: "/var/log/suricata/eve.json"
  rules_path: "/etc/suricata/rules"
  custom_rules_path: "./rules/custom"
  
hexstrike:
  log_path: "./logs/hexstrike"
  
detection:
  alert_threshold: 5
  time_window: 300  # 5ë¶„
  severity_weights:
    critical: 10
    high: 5
    medium: 2
    low: 1

auto_response:
  enabled: true
  block_threshold: 20
  whitelist:
    - "127.0.0.1"
    - "localhost"
```

### dashboard/config.py

```python
import os

class Config:
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'dev-secret-key-change-in-production'
    
    # FastAPI ë°±ì—”ë“œ
    API_URL = 'http://localhost:8000'
    
    # ì„¸ì…˜
    SESSION_COOKIE_SECURE = True
    SESSION_COOKIE_HTTPONLY = True
    PERMANENT_SESSION_LIFETIME = 3600  # 1ì‹œê°„
    
    # MFA ì„¤ì •
    MFA_ENABLED = True
    MFA_ISSUER_NAME = "Security Dashboard"
    
    # ëŒ€ì‹œë³´ë“œ
    ITEMS_PER_PAGE = 50
    CHART_UPDATE_INTERVAL = 5  # ì´ˆ
    
    # ë³´ê³ ì„œ
    REPORT_FORMATS = ['pdf', 'html', 'json']
    REPORT_DIRECTORY = './reports'
```

## ğŸ” ë³´ì•ˆ ì„¤ì •

### MFA ì´ˆê¸° ì„¤ì •

```python
# ê´€ë¦¬ì ê³„ì • ìƒì„± ì‹œ QR ì½”ë“œ ìƒì„±
import pyotp
import qrcode

# TOTP ì‹œí¬ë¦¿ ìƒì„±
secret = pyotp.random_base32()

# QR ì½”ë“œ ìƒì„±
uri = pyotp.totp.TOTP(secret).provisioning_uri(
    name='admin@security-dashboard',
    issuer_name='Security Dashboard'
)

qr = qrcode.make(uri)
qr.save('admin_mfa_qr.png')

print(f"Secret: {secret}")
print("Google Authenticatorë¡œ QR ì½”ë“œ ìŠ¤ìº”í•˜ì„¸ìš”!")
```

## ğŸ“Š í¬íŠ¸ ì‚¬ìš©

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ì„¤ëª… |
|--------|------|------|
| ì·¨ì•½í•œ ì›¹ (Frontend) | 3000 | í…ŒìŠ¤íŠ¸ìš© í”„ë¡ íŠ¸ì—”ë“œ |
| ì·¨ì•½í•œ ì›¹ (Backend) | 5000 | í…ŒìŠ¤íŠ¸ìš© ë°±ì—”ë“œ |
| FastAPI Backend | 8000 | REST API |
| Flask Dashboard | 8080 | ì›¹ ëŒ€ì‹œë³´ë“œ |
| MCP Server | 9000 | MCP í”„ë¡œí† ì½œ |
| Ollama | 11434 | AI ëª¨ë¸ ì„œë²„ |

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
pytest tests/

# API í…ŒìŠ¤íŠ¸
curl http://localhost:8000/api/logs/recent

# ê³µê²© ì‹œë®¬ë ˆì´ì…˜ (HexStrike)
# Red Team ì„œë²„ì—ì„œ ì‹¤í–‰
hexstrike attack --target http://blue-team-ip:3000
```

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **MCP ì„œë²„ êµ¬í˜„** - Suricata ë° HexStrike ë¡œê·¸ ìˆ˜ì§‘
2. **AI ì—ì´ì „íŠ¸ êµ¬í˜„** - Ollama ê¸°ë°˜ ë¡œê·¸ ë¶„ì„ ë° ë£° ìƒì„±
3. **FastAPI ë°±ì—”ë“œ êµ¬í˜„** - REST API ë° WebSocket
4. **Flask ëŒ€ì‹œë³´ë“œ êµ¬í˜„** - SIEM ìŠ¤íƒ€ì¼ UI
5. **ì·¨ì•½í•œ ì›¹ ì„œë²„ êµ¬í˜„** - í…ŒìŠ¤íŠ¸ í™˜ê²½
6. **í†µí•© í…ŒìŠ¤íŠ¸** - ì „ì²´ ì‹œìŠ¤í…œ ì—°ë™ í…ŒìŠ¤íŠ¸